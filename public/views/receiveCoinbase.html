<div 
  class="topbar-container" 
  ng-include="'views/includes/topbar.html'"
  ng-init="titleSection='Receive'; goBackToState = 'coinbase'; noColor = true">
</div>


<div class="content coinbase" ng-controller="receiveCoinbaseController as receive">

  <div class="onGoingProcess" ng-show="receive.loading">
    <div class="onGoingProcess-content" ng-style="{'background-color': '#2b71b1'}">
    <div class="spinner">
      <div class="rect1"></div>
      <div class="rect2"></div>
      <div class="rect3"></div>
      <div class="rect4"></div>
      <div class="rect5"></div>
    </div>
    <span>{{receive.loading}}</span>
    </div>
  </div>

  <div class="white p10 size-12" ng-show="index.coinbaseAccount && !receive.success">
    Available balance: {{index.coinbaseAccount.balance.amount}} {{index.coinbaseAccount.balance.currency}}
  </div>

  <div class="row m20t" ng-show="receive.error">
    <div class="columns">
      <div class="box-notification">
        <ul class="no-bullet m0 size-12 text-warning">
          <li ng-repeat="err in receive.error.errors" ng-bind-html="err.message"></li>
        </ul>       
      </div>
    </div>
  </div>
  
  <div class="row m20t" ng-show="index.coinbaseAccount && !receive.success">
    <div class="columns">
      <form name="receiveForm" 
        ng-submit="receive.receive(index.coinbaseToken, index.coinbaseAccount)" novalidate>

        <label>Coinbase Account</label>
        <div class="disabled-input">
          {{index.coinbaseAccount.name}}
        </div>

        <label>Amount</label>
        <div class="input">
          <input type="number" id="amount" 
          name="amount" ng-attr-placeholder="{{'Amount'}}"
          ng-minlength="0.00000001" ng-maxlength="10000000000" 
          ng-model="amount" autocomplete="off" ng-disabled="receive.loading">

          <a class="postfix">BTC</a>
        </div>

        <div class="text-center">
          <i class="db fi-arrow-down size-24 m10v"></i>
        </div>

        <div ng-if="index.coinbaseToken" 
          ng-init="receive.init(index.coinbaseTestnet)"
          ng-click="openWalletsModal(receive.otherWallets)">
          <label>Copay Wallet</label>
          <div class="input">
            <input type="text" id="address" name="address" ng-disabled="receive.selectedWalletId" 
            ng-attr-placeholder="{{'Choose your source wallet'}}" 
            ng-model="receive.selectedWalletName" required>
            <a class="postfix size-12 m0 text-gray">
              <i class="icon-wallet size-18"></i>
            </a>
          </div>
        </div> 
          
        <div class="input">
          <input class="button black expand round" 
          ng-style="{'background-color': '#2b71b1'}"
          type="submit" value="{{'Continue'}}" ng-disabled="receive.loading || !amount">
        </div>
      </form> 
    </div>
  </div>

  <div class="m20t row text-center" ng-show="receive.success">
    <div class="columns">
      <h1>Received</h1>
      <p class="text-gray">
        A transfer has been initiated to your Copay selected wallet.
      </p>

      <button class="outline dark-gray round expand"
              ng-click="$root.go('coinbase')">OK</button>
    </div>
  </div>

</div>
<div class="extra-margin-bottom"></div>
